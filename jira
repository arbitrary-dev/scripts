#!/usr/bin/env python3

import os
from jira import JIRA
import argparse

jira_user = os.environ['JIRA_USER']
jira_pass = os.environ['JIRA_PASS']
jira_proj = os.environ['JIRA_DEF_PROJECT']
jira_url  = os.environ['JIRA_URL']

j = JIRA(jira_url, basic_auth=(jira_user, jira_pass))

p = argparse.ArgumentParser(description="Utility for working with JIRA")
sp = p.add_subparsers(dest='command')

show_sp = sp.add_parser('show')
show_sp.add_argument('-f', '--format')

work_sp = sp.add_parser('work')
work_sp.add_argument('time', nargs='?', default='1h')
work_sp.add_argument('-c', '--comment', default='work')

sp.add_parser('list')

args = p.parse_args()

print(args)

# TODO
#
# jira show TICKET
# jira show -F "%id %summary"
# jira work
# jira list
